{% capture the_collection %}{{page.collection}}{% endcapture %}
  {% if page.collection %}
    {% assign document = (site[the_collection] | sort: 'path' ) %}
  {% endif %}
{% for links in document  %}
  {% if links.title == page.title %}
    {% unless forloop.first %}
      {% assign prevurl = prev.url %}
    {% endunless %}
    {% unless forloop.last %}
      {% assign nexturl = document[forloop.index].url %}
    {% endunless %}
  {% endif %}
  {% assign prev = links %}
{% endfor %}

<div class="col-xs-12 col-md-3 subnav js-subnav">
  <div class="subnav__chapters-container subnav__chapters-container--active hidden-mobile--block">
    
    <div class="subnav__chapter-header-container">
      <div class="subnav__arrows-container">
        {% if prevurl %}
          <a href="{{prevurl}}" class="subnav__arrow">
            {% include svgs/arrow-left.svg %}
          </a>
        {% else %}
          <span class="subnav__arrow subnav__arrow--disabled">
            {% include svgs/arrow-left.svg %}
          </span>
        {% endif %}
        {% if nexturl %}
          <a href="{{nexturl}}" class="subnav__arrow">
            {% include svgs/arrow-right.svg %}
          </a>
        {% else %}
          <span class="subnav__arrow subnav__arrow--disabled">
            {% include svgs/arrow-right.svg %}
          </span>
        {% endif %}
      </div>
      <h2 class="chapter-number">{{ page.chapter_number }}</h2>
      <button class="chapter-toggle js-show-chapter-nav">
        Show all chapters
      </button>
    </div>
    <div id="toc" class="subnav__chapters-listing"></div>
  </div>

  <div id="toc-chapters" class="chapter-nav__listing"></div>
</div>
